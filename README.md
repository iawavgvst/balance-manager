
## Баланс-менеджер пользователей

Данный проект разработан с использованием Laravel 12 и PHP 8.4. Он представляет собой приложение, которое позволяет управлять балансом пользователей: 
— зачислять средства, 
— списывать средства, 
— переводить деньги между пользователями, 
— получать текущий баланс.

## Основные функции

1. **Начисление средств пользователю**
   - **Метод:** POST /api/deposit
   - **Тело запроса:**
   json
     {
       "user_id": 1,
       "amount": 500.00,
       "comment": "Пополнение через карту"
     }

2. **Списание средств**
   - **Метод:** POST /api/withdraw
   - **Тело запроса:**
   json
     {
       "user_id": 1,
       "amount": 200.00,
       "comment": "Покупка подписки"
     }
   - **Примечание:** Баланс не может уходить в минус.

3. **Перевод между пользователями**
   - **Метод:** POST /api/transfer
   - **Тело запроса:**
   json
     {
       "from_user_id": 1,
       "to_user_id": 2,
       "amount": 150.00,
       "comment": "Перевод другу"
     }

4. **Получение баланса пользователя**
   - **Метод:** GET /api/balance/{user_id}
   - **Ответ:**
   json
     {
       "user_id": 1,
       "balance": 350.00
     }

## Ответы и ошибки

Все ответы API возвращаются с соответствующими HTTP-кодами:

- 200 — успешный ответ.
- 400 / 422 — ошибки валидации.
- 404 — пользователь не найден.
- 409 — конфликт (например, недостаточно средств).

## Установка и запуск

1. Клонируйте репозиторий: git clone https://github.com/iawavgvst/balance-manager.git --> cd balance-manager.
2. Создайте файл .env на основе .env.example: cp .env.example .env.
3. Настройте параметры подключения к базе данных в файле .env.
4. Для запуска проекта использовался Docker (Docker-compose) - прописаны файлы конфигурации для nginx, docker-compose.yml, и Dockerfile, которые обеспечивают подключение к базе данных, работу веб-сервера и обработку запросов через php-fpm. 

Необходимо выполнить в терминале следующие команды для запуска проекта в контейнерах:

- cd docker_b - войти в директорию проекта,
- docker-compose up -d - поднять контейнеры. 

Подключение осуществляется через localhost:8075.

5. Установите зависимости Composer: docker-compose exec php-fpm composer install.
6. Выполните миграции базы данных:

- cd docker_b,
- docker-compose exec php-fpm bash,
- php artisan migrate,
- (были использованы фабрика и сидер, следовательно) php artisan db:seed.

## Остановка Docker

Чтобы остановить контейнеры, используйте команду:

- docker-compose down

## Тестирование API

Вы можете использовать инструменты, такие как Postman или cURL, для взаимодействия с API. Все запросы возвращают данные в формате JSON.
Тесты используемых методов можно запустить с помощью следующих команд:

- cd docker_b,
- docker-compose exec php-fpm bash,
- php artisan test.

## Инструменты и документация

Для достижения высокой эффективности и качества работы с Laravel были задействованы следующие инструменты:

- Artisan (инструмент командной строки) - Laravel Artisan Documentation,
- Eloquent (ORM для работы с базой данных) - Laravel Eloquent ORM Documentation,
- Routing (маршрутизация) - Laravel Routing Documentation,
- Migrations (управление схемами базы данных) - Laravel Migrations Documentation,
- Validation (проверка входящих данных на соответствие заданным правилам) - Laravel Validation Documentation.
